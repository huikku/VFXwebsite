/** * Creative Portfolio Template - Main JavaScript * Author: John Huikku * Copyright Â© 2025 John Huikku * Support & Discussion: https: * * Permission is hereby granted,free of charge,to any person obtaining a copy * of this software and associated documentation files(the "Software"),to deal * in the Software without restriction,including without limitation the rights * to use,copy,modify,merge,publish,distribute,sublicense,and/or sell * copies of the Software,and to permit persons to whom the Software is * furnished to do so,subject to the following conditions: * * The above copyright notice and this permission notice shall be included in all * copies or substantial portions of the Software. * * THE SOFTWARE IS PROVIDED "AS IS",WITHOUT WARRANTY OF ANY KIND,EXPRESS OR * IMPLIED,INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,DAMAGES OR OTHER * LIABILITY,WHETHER IN AN ACTION OF CONTRACT,TORT OR OTHERWISE,ARISING FROM,* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE * SOFTWARE. *//** * Main JavaScript file for Portfolio Template * Combined functionality from multiple scripts */if(document.readyState === 'loading'){document.addEventListener('DOMContentLoaded',init);}else{init();}function init(){try{if(typeof AOS !== 'undefined'){AOS.init({duration: 800,easing: 'ease-in-out',once: true,mirror: false,disable: window.innerWidth < 768});}initMobileNav();initSmoothScroll();initLazyLoading();initPortfolioFilters();initVideoModal();initGlitchEffect();initContactForm();let scrollTimeout;window.addEventListener('scroll',function(){if(!scrollTimeout){scrollTimeout = setTimeout(function(){handleScroll();scrollTimeout = null;},100);}},{passive: true});}catch(error){console.error('Initialization error:',error);}}/** * Initialize mobile navigation menu */function initMobileNav(){const mobileMenu = document.getElementById('mobile-menu');const navMenu = document.querySelector('.nav-menu');if(mobileMenu && navMenu){mobileMenu.addEventListener('click',function(){mobileMenu.classList.toggle('active');navMenu.classList.toggle('active');document.body.classList.toggle('no-scroll');});const navLinks = document.querySelectorAll('.nav-menu li a');navLinks.forEach(link =>{link.addEventListener('click',function(){mobileMenu.classList.remove('active');navMenu.classList.remove('active');document.body.classList.remove('no-scroll');});});}}/** * Initialize smooth scrolling for anchor links */function initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(anchor =>{anchor.addEventListener('click',function(e){e.preventDefault();const targetId = this.getAttribute('href');if(targetId === '#')return;const targetElement = document.querySelector(targetId);if(targetElement){const headerHeight = document.querySelector('nav').offsetHeight;const offsetTop = targetElement.getBoundingClientRect().top + window.pageYOffset - headerHeight;window.scrollTo({top: offsetTop,behavior: 'smooth'});}});});}/** * Initialize lazy loading for images */function initLazyLoading(){if('IntersectionObserver' in window){const lazyImages = document.querySelectorAll('img[loading="lazy"]');const imageObserver = new IntersectionObserver((entries)=>{entries.forEach(entry =>{if(entry.isIntersecting){const img = entry.target;if(img.dataset.src){img.src = img.dataset.src;}imageObserver.unobserve(img);}});});lazyImages.forEach(image =>{imageObserver.observe(image);});}}/** * Handle scroll event for header transparency */function handleScroll(){const nav = document.querySelector('nav');if(window.scrollY > 100){nav.style.backgroundColor = 'rgba(0,0,0,0.9)';}else{nav.style.backgroundColor = 'rgba(26,26,26,0.8)';}}/** * Initialize portfolio filter functionality * COMPLETELY SEPARATE from video functionality */function initPortfolioFilters(){const filterButtons = document.querySelectorAll('.portfolio-categories button');const portfolioItems = document.querySelectorAll('.portfolio-item');setTimeout(()=> filterPortfolio('all'),100);filterButtons.forEach(button =>{button.addEventListener('click',function(){filterButtons.forEach(btn => btn.classList.remove('active'));this.classList.add('active');const filterValue = this.getAttribute('data-category');filterPortfolio(filterValue);});});/** * Filter portfolio items based on category * @param{string}category - The category to filter by */ function filterPortfolio(category){console.log("Filtering by:",category);if(portfolioItems.length === 0){console.error("No portfolio items found to filter!");return;}portfolioItems.forEach(item =>{const dataCategory = item.getAttribute('data-category')|| '';if(category === 'all' || dataCategory.toLowerCase().includes(category.toLowerCase())){item.style.display = 'block';setTimeout(()=>{item.style.opacity = '1';item.style.transform = 'translateY(0)';},50);}else{item.style.opacity = '0';item.style.transform = 'translateY(20px)';setTimeout(()=>{item.style.display = 'none';},300);}});setTimeout(refreshPortfolioGrid,350);}/** * Refresh the portfolio grid layout * This helps with any layout shifts after filtering */ function refreshPortfolioGrid(){const grid = document.getElementById('portfolio-grid');if(grid){grid.style.display = 'none';void grid.offsetHeight;grid.style.display = 'grid';}}}/** * Initialize video modal functionality * Refactored to eliminate code duplication */function initVideoModal(){const videoModal = document.getElementById('videoModal');const videoPlayer = document.getElementById('videoPlayer');const closeVideo = document.getElementById('closeVideo');if(!videoModal || !videoPlayer || !closeVideo){console.error("Video modal elements not found!");return;}/** * Close the video modal and cleanup */ function closeModal(){videoModal.style.display = 'none';videoPlayer.innerHTML = '';document.body.style.overflow = '';}/** * Open video in modal or new tab * @param{string}videoId - YouTube video ID * @param{string}externalUrl - External URL to open in new tab */ function openVideo(videoId,externalUrl){if(videoId){videoModal.style.display = 'flex';videoPlayer.innerHTML = '<div class="loading-spinner">Loading...</div>';document.body.style.overflow = 'hidden';const iframe = document.createElement('iframe');iframe.src = `https: iframe.title = 'YouTube video player';iframe.setAttribute('allowfullscreen','');iframe.setAttribute('allow','accelerometer;autoplay;clipboard-write;encrypted-media;gyroscope;picture-in-picture');iframe.setAttribute('sandbox','allow-scripts allow-same-origin allow-presentation');iframe.style.border = 'none';setTimeout(()=>{videoPlayer.innerHTML = '';videoPlayer.appendChild(iframe);},100);}else if(externalUrl){const newWindow = window.open(externalUrl,'_blank','noopener,noreferrer');if(!newWindow){alert('Please allow popups for this site to view external links.');}}}/** * Handle portfolio item click * @param{Event}e - Click event * @param{HTMLElement}portfolioItem - The portfolio item element */ function handlePortfolioClick(e,portfolioItem){if(e.target.closest('.portfolio-categories')){return;}e.preventDefault();e.stopPropagation();const videoId = portfolioItem.getAttribute('data-video-id');const externalUrl = portfolioItem.getAttribute('data-external-url');openVideo(videoId,externalUrl);}closeVideo.addEventListener('click',closeModal);videoModal.addEventListener('click',function(event){if(event.target === videoModal){closeModal();}});document.addEventListener('keydown',function(e){if(e.key === 'Escape' && videoModal.style.display === 'flex'){closeModal();}});document.querySelectorAll('.portfolio-item').forEach(item =>{item.addEventListener('click',function(e){handlePortfolioClick(e,this);});});}/** * Initialize glitch effect for hero title * Optimized version with better performance and error handling */function initGlitchEffect(){const glitchTitle = document.querySelector('.glitch-title');if(!glitchTitle){console.warn('Glitch title element not found!');return;}const rubikFonts = [ 'Rubik Glitch','Rubik Glitch Pop','Rubik Broken Fax' ];const colors = ['#00FFFF','#FFA500','#FF4D4D','#FFFFFF'];const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;if(prefersReducedMotion){glitchTitle.style.fontFamily = "'Rubik Glitch',sans-serif";glitchTitle.style.color = '#FF4D4D';return;}const originalText = glitchTitle.textContent;const originalColor = '#FF4D4D';let glitchTimeout = null;let isGlitching = true;/** * Apply a random glitch effect */ function performGlitch(){if(!isGlitching)return;try{if(Math.random()< 0.8){const randomFont = rubikFonts[Math.floor(Math.random()* rubikFonts.length)];glitchTitle.style.fontFamily = `'${randomFont}',sans-serif`;}if(Math.random()< 0.5){const randomX =(Math.random()* 4 - 2).toFixed(2);const randomY =(Math.random()* 2 - 1).toFixed(2);glitchTitle.style.transform = `translate(${randomX}px,${randomY}px)`;}if(Math.random()< 0.3){const randomColor = colors[Math.floor(Math.random()* colors.length)];glitchTitle.style.color = randomColor;}if(glitchTitle.textContent !== originalText){glitchTitle.textContent = originalText;}const randomDelay = Math.floor(Math.random()* 350)+ 100;glitchTimeout = setTimeout(performGlitch,randomDelay);}catch(error){console.error("Error in glitch effect:",error);recoverGlitch();}}/** * Recover from glitch error */ function recoverGlitch(){try{glitchTitle.style.fontFamily = "'Rubik Glitch',sans-serif";glitchTitle.style.color = originalColor;glitchTitle.style.transform = 'translate(0,0)';glitchTitle.textContent = originalText;}catch(e){console.error("Failed to recover from glitch error:",e);isGlitching = false;}}setTimeout(performGlitch,1000);window.addEventListener('beforeunload',function(){isGlitching = false;if(glitchTimeout){clearTimeout(glitchTimeout);}});}/** * Initialize contact form with error handling */function initContactForm(){const contactForm = document.querySelector('.contact-form');if(!contactForm){return;}contactForm.addEventListener('submit',function(e){const submitButton = this.querySelector('button[type="submit"]');const originalButtonText = submitButton.textContent;submitButton.textContent = 'Sending...';submitButton.disabled = true;setTimeout(function(){if(submitButton.disabled){submitButton.textContent = originalButtonText;submitButton.disabled = false;}},5000);});const urlParams = new URLSearchParams(window.location.search);if(urlParams.get('success')=== 'true'){const successMessage = document.createElement('div');successMessage.className = 'form-success-message';successMessage.textContent = 'Thank you! Your message has been sent successfully.';successMessage.style.cssText = 'background: #4CAF50;color: white;padding: 1rem;border-radius: 8px;margin: 1rem 0;text-align: center;';contactForm.insertBefore(successMessage,contactForm.firstChild);window.history.replaceState({},document.title,window.location.pathname);}}